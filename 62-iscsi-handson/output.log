iscsi-handson ❱❱❱ sudo ./setup_iscsi.sh
Creating backing file...
Configuring iSCSI target...
targetcli shell version 2.1.53
Copyright 2011-2013 by Datera, Inc and others.
For help on commands, type 'help'.

/> Created fileio backing with size 1073741824
/> Created target iqn.2025-12.com.example:target1.
Created TPG 1.
Global pref auto_add_default_portal=true
Created default portal listening on all IPs (0.0.0.0), port 3260.
/> Parameter authentication is now '0'.
Parameter demo_mode_write_protect is now '0'.
Parameter generate_node_acls is now '1'.
Parameter cache_dynamic_acls is now '1'.
/> Created LUN 0.
/> No such NetworkPortal in configfs: /sys/kernel/config/target/iscsi/iqn.2025-12.com.example:target1/tpgt_1/np/127.0.0.1:3260
/> Using default IP port 3260
Binding to INADDR_ANY (0.0.0.0)
This NetworkPortal already exists in configFS
/> Configuration saved to /etc/rtslib-fb-target/saveconfig.json
/> Global pref auto_save_on_exit=true
Last 10 configs saved in /etc/rtslib-fb-target/backup/.
Configuration saved to /etc/rtslib-fb-target/saveconfig.json
Setting up initiator...
Logging in...
127.0.0.1:3260,1 iqn.2025-12.com.example:target1
Logging in to [iface: default, target: iqn.2025-12.com.example:target1, portal: 127.0.0.1,3260]
Login to [iface: default, target: iqn.2025-12.com.example:target1, portal: 127.0.0.1,3260] successful.
Done! Waiting 10 seconds for device attachment...
Current sessions:
iSCSI Transport Class version 2.0-870
version 2.1.9
Target: iqn.2025-12.com.example:target1 (non-flash)
	Current Portal: 127.0.0.1:3260,1
	Persistent Portal: 127.0.0.1:3260,1
#!/bin/bash -x
		**********
		Interface:
#!/bin/bash -x
		**********
		Iface Name: default
		Iface Transport: tcp
		Iface Initiatorname: iqn.2025-12.com.example:initiator1
		Iface IPaddress: 127.0.0.1
		Iface HWaddress: default
		Iface Netdev: default
		SID: 4
		iSCSI Connection State: LOGGED IN
		iSCSI Session State: LOGGED_IN
		Internal iscsid Session State: NO CHANGE
		*********
		Timeouts:
		*********
		Recovery Timeout: 120
		Target Reset Timeout: 30
		LUN Reset Timeout: 30
		Abort Timeout: 15
		*****
		CHAP:
		*****
		username: <empty>
		password: ********
		username_in: <empty>
		password_in: ********
		************************
		Negotiated iSCSI params:
		************************
		HeaderDigest: None
		DataDigest: None
		MaxRecvDataSegmentLength: 262144
		MaxXmitDataSegmentLength: 262144
		FirstBurstLength: 65536
		MaxBurstLength: 262144
		ImmediateData: Yes
		InitialR2T: Yes
		MaxOutstandingR2T: 1
		************************
		Attached SCSI devices:
		************************
		Host Number: 0	State: running
		scsi0 Channel 00 Id 0 Lun: 0
			Attached scsi disk sda		State: running
Block devices:
NAME        MAJ:MIN RM   SIZE RO TYPE MOUNTPOINTS
loop0         7:0    0 104.2M  1 loop /snap/core/17247
loop1         7:1    0     4K  1 loop /snap/bare/5
loop2         7:2    0  73.9M  1 loop /snap/core22/2139
loop3         7:3    0    74M  1 loop /snap/core22/2163
loop4         7:4    0 250.6M  1 loop /snap/firefox/7423
loop5         7:5    0 250.4M  1 loop /snap/firefox/7477
loop6         7:6    0  11.1M  1 loop /snap/firmware-updater/167
loop7         7:7    0  18.5M  1 loop /snap/firmware-updater/210
loop8         7:8    0   516M  1 loop /snap/gnome-42-2204/202
loop9         7:9    0 516.2M  1 loop /snap/gnome-42-2204/226
loop10        7:10   0  91.7M  1 loop /snap/gtk-common-themes/1535
loop11        7:11   0     2G  1 loop /snap/kf6-core22/43
loop12        7:12   0  50.8M  1 loop /snap/snapd/25202
loop13        7:13   0  10.8M  1 loop /snap/snap-store/1270
loop14        7:14   0  17.5M  1 loop /snap/snap-store/1300
loop15        7:15   0  50.9M  1 loop /snap/snapd/25577
loop16        7:16   0   576K  1 loop /snap/snapd-desktop-integration/315
loop17        7:17   0   568K  1 loop /snap/snapd-desktop-integration/253
loop18        7:18   0   172K  1 loop /snap/usbutils-lool/2
loop19        7:19   0   124K  1 loop /snap/usbutils-snap/2
sda           8:0    0     1G  0 disk
nvme0n1     259:0    0 119.2G  0 disk
├─nvme0n1p1 259:1    0     1G  0 part /boot/efi
└─nvme0n1p2 259:2    0 118.2G  0 part /
iscsi-handson ❱❱❱ vim ./setup_iscsi.sh
iscsi-handson ❱❱❱ vim cleanup.sh
iscsi-handson ❱❱❱ vim cleanup.sh
iscsi-handson ❱❱❱
iscsi-handson ❱❱❱
iscsi-handson ❱❱❱
iscsi-handson ❱❱❱ ./iscsi_rw
Failed to open device: Permission denied
iscsi-handson ❱❱❱ sudo ./iscsi_rw
Wrote 14 bytes: Hello, iSCSI!
Read 512 bytes: Hello, iSCSI!
iscsi-handson ❱❱❱
